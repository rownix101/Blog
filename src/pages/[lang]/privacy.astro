---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import { SITE, SOCIAL_LINKS } from '@/consts'
import { ui } from '@/i18n/ui'
import { useTranslations } from '@/i18n/utils'
import Layout from '@/layouts/Layout.astro'
import { Icon } from 'astro-icon/components'

export function getStaticPaths() {
    return [{ params: { lang: 'zh-cn' } }, { params: { lang: 'en' } }]
}

const { lang } = Astro.params
const t = useTranslations(lang as keyof typeof ui)

// Get contact email from social links or use placeholder
const contactEmail =
    SOCIAL_LINKS.find((link) => link.label === 'Email')?.href.replace(
        'mailto:',
        '',
    ) || 'your@email.com'
const siteName = SITE.title
---

<Layout class="max-w-3xl" lang={lang}>
    <PageHead slot="head" title={t('footer.privacy')} />
    <Breadcrumbs
        items={[{ label: t('footer.privacy'), icon: 'lucide:shield-check' }]}
    />

    <article class="prose prose-neutral dark:prose-invert max-w-none">
        <div class="bg-card/50 mb-6 rounded-lg border p-6">
            <div class="mb-2 flex items-center gap-3">
                <Icon name="lucide:shield-check" class="text-primary size-6" />
                <h1 class="m-0 text-3xl font-bold">{t('footer.privacy')}</h1>
            </div>
            <p class="text-muted-foreground m-0 text-sm">
                {lang === 'en' ? 'Last updated' : '最后更新'}: {
                    new Date().toLocaleDateString(
                        lang === 'en' ? 'en-US' : 'zh-CN',
                        { year: 'numeric', month: 'long', day: 'numeric' },
                    )
                }
            </p>
        </div>

        {
            lang === 'en' ? (
                <section class="mb-8 space-y-4">
                    <h2 class="text-2xl font-semibold">Introduction</h2>
                    <p>
                        At {siteName}, we respect your privacy and are committed
                        to protecting your personal data. This privacy policy
                        explains how we collect, use, and safeguard your
                        information when you visit our website.
                    </p>
                </section>
            ) : (
                /* ... shortened for brevity, but I should probably provide a bit more for a real implementation ... */
                <section class="mb-8 space-y-4">
                    <h2 class="text-2xl font-semibold">介绍</h2>
                    <p>
                        在 {siteName}
                        ，我们尊重您的隐私，并致力于保护您的个人数据。
                        本隐私政策解释了当您访问我们的网站时，我们如何收集、使用和保护您的信息。
                    </p>
                </section>
            )
        }

        <section class="mb-8 space-y-4">
            <h2 class="text-2xl font-semibold">
                {lang === 'en' ? 'Contact Us' : '联系我们'}
            </h2>
            <div class="bg-muted/30 rounded-lg border p-4">
                <p class="m-0">
                    <strong>Email:</strong>
                    <a href={`mailto:${contactEmail}`} class="underline"
                        >{contactEmail}</a
                    >
                </p>
            </div>
        </section>
    </article>
</Layout>
