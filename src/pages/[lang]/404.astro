---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import { buttonVariants } from '@/components/ui/button'
import { languages, ui } from '@/i18n/ui'
import { useLocalizedPath } from '@/i18n/utils'
import Layout from '@/layouts/Layout.astro'
import { cn } from '@/lib/utils'

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({ params: { lang } }))
}

const { lang } = Astro.params
const l = useLocalizedPath(lang as keyof typeof ui)
const isEn = lang === 'en'
const isJa = lang === 'ja'
const titleText = isEn
  ? 'Page not found'
  : isJa
    ? 'ページが見つかりません'
    : '页面未找到'
const descText = isEn
  ? "Oops! The page you're looking for doesn't exist."
  : isJa
    ? 'お探しのページは存在しません。'
    : '哎呀！您寻找的页面不存在。'
const backText = isEn ? 'Go to home page' : isJa ? 'ホームへ戻る' : '返回首页'
---

<Layout class="max-w-3xl" lang={lang}>
  <PageHead slot="head" title="404" />
  <Breadcrumbs items={[{ label: '???', icon: 'lucide:circle-help' }]} />

  <section
    class="flex flex-col items-center justify-center gap-y-4 text-center"
  >
    <div class="max-w-md">
      <h1 class="mb-4 text-3xl font-medium">
        404: {titleText}
      </h1>
      <p class="prose">{descText}</p>
    </div>
    <Link
      href={l('/')}
      class={cn(buttonVariants({ variant: 'outline' }), 'flex gap-x-1.5 group')}
    >
      <span class="transition-transform group-hover:-translate-x-1">&larr;</span
      >
      {backText}
    </Link>
  </section>
</Layout>
