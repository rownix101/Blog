---
import AuthorCard from '@/components/AuthorCard.astro'
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import { languages, ui } from '@/i18n/ui'
import { useLocalizedPath } from '@/i18n/utils'
import Layout from '@/layouts/Layout.astro'
import { getAllAuthors } from '@/lib/data-utils'

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({ params: { lang } }))
}

const { lang } = Astro.params
const authors = await getAllAuthors()
const authorsLabel = lang === 'en' ? 'Authors' : lang === 'ja' ? '著者' : '作者'

const l = useLocalizedPath(lang as keyof typeof ui)
---

<Layout class="max-w-3xl" lang={lang}>
  <PageHead slot="head" title={authorsLabel} />
  <Breadcrumbs items={[{ label: authorsLabel, icon: 'lucide:users' }]} />

  <section class="flex flex-col gap-y-4">
    {
      authors.map((author) => (
        <AuthorCard author={author} link={l(`/authors/${author.id}`)} />
      ))
    }
  </section>
</Layout>
